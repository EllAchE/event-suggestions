generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model calendar_event {
  id          Int      @id @unique @default(autoincrement())
  location    location @relation(fields: [location_id], references: [id])
  location_id Int
  description String
  title       String
  // source      Source
  source      String
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
}

model location {
  id             Int              @id @unique @default(autoincrement())
  country        String           @default("US")
  address_line_1 String
  address_line_2 String?
  lat            Decimal?
  long           Decimal?
  zip            Int?
  state          String?
  city           String
  events         calendar_event[]
  User           User[]

  @@unique([city, state, address_line_1])
  @@unique([city, country, address_line_1])
  @@unique([lat, long]) // only one with lat/long
}

// enum Source {
//   SERPAPI
//   TICKETMASTER
//   MEETUP
// }

model User {
  id               Int      @id @unique @default(autoincrement())
  email            String // determine if this should be kept
  user_location_id Int
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt
  location         location @relation(fields: [location_id], references: [id])
  location_id      Int
}
